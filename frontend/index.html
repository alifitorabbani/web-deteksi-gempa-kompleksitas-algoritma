<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Earthquake Data Analysis Platform</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üåç</text></svg>">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <div class="container">
            <h1>Earthquake Data Analysis Platform</h1>
            <p>Real-time seismic data analysis with algorithm complexity comparison</p>
        </div>
    </header>

    <main id="main-app">
        <div class="back-button-container">
            <a href="dashboard.html" class="back-button">‚¨ÖÔ∏è Back to Dashboard</a>
        </div>
        <section id="controls" class="controls-section">
            <div class="container">
                <div class="controls-card">
                    <h3>Data Parameters</h3>
                    <div class="controls-grid">
                        <div class="control-group">
                            <label for="size-select">Sample Size:</label>
                            <select id="size-select">
                                <option value="1">1</option>
                                <option value="10" selected>10</option>
                                <option value="25">25</option>
                                <option value="50">50</option>
                                <option value="100">100</option>
                                <option value="500">500</option>
                                <option value="1000">1000</option>
                                <option value="2000">2000</option>
                                <option value="5000">5000</option>
                                <option value="10000">10000</option>
                            </select>
                        </div>

                        <div class="control-group">
                            <label for="sort-select">Sort By:</label>
                            <select id="sort-select">
                                <option value="time" selected>Time (Newest First)</option>
                                <option value="magnitude">Magnitude (Highest First)</option>
                            </select>
                        </div>

                        <div class="control-group">
                            <label>&nbsp;</label>
                            <button id="load-btn">Load Earthquake Data</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div id="loading" style="display: none; text-align: center; margin: 20px;">
            <p id="loading-text">Memuat data gempa...</p>
            <div id="progress-container" style="margin-top: 15px; display: none;">
                <div id="progress-bar" style="width: 100%; height: 20px; background: #e0e0e0; border-radius: 10px; overflow: hidden; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);">
                    <div id="progress-fill" style="height: 100%; background: linear-gradient(90deg, #2c3e50, #34495e); width: 0%; transition: width 0.3s ease; border-radius: 10px;"></div>
                </div>
                <p id="progress-text" style="margin-top: 8px; font-size: 12px; color: #666;">0%</p>
            </div>
            <div id="cache-indicator" style="display: none; margin-top: 10px;">
                <small style="color: #28a745;">‚ö° Data dimuat dari cache untuk performa optimal</small>
            </div>
        </div>

        <div id="results">
            <h2>Analisis Kompleksitas Algoritma</h2>
            <div style="text-align: center; padding: 2rem; background: #f8f9fa; border-radius: 8px; margin-bottom: 2rem;">
                <p style="color: #666; font-size: 1.1rem;">Klik "Load Earthquake Data" untuk memuat dan menganalisis data gempa dari USGS</p>
                <p style="color: #888; font-size: 0.9rem;">Data akan ditampilkan di sini setelah dimuat</p>
            </div>

            <div class="performance-chart">
                <h3>Grafik Performa untuk Ukuran Sample Saat Ini</h3>
                <canvas id="currentSizeChart" width="600" height="300"></canvas>
            </div>

            <div style="margin-top: 30px; font-size: 14px; line-height: 1.6; background: rgba(255,255,255,0.9); padding: 20px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                <h3 style="color: #2c3e50; margin-top: 0;">Analisis Kompleksitas Algoritma: Iteratif vs Rekursif</h3>

                <h4 style="color: #34495e;">Kompleksitas Waktu Teoritis</h4>
                <p>Kedua algoritma memiliki kompleksitas waktu <strong>O(n)</strong>, di mana n adalah ukuran input. Waktu eksekusi meningkat linier seiring bertambahnya data.</p>

                <h4 style="color: #34495e;">Perbandingan Waktu Eksekusi Berdasarkan Ukuran Input</h4>
                <ul>
                    <li><strong>Input Kecil (n=1-100):</strong> Performa hampir sama (~0.0001-0.0008 detik). Overhead rekursif masih toleran.</li>
                    <li><strong>Input Sedang (n=500-1200):</strong> Iteratif 2x lebih cepat. Overhead stack mulai terasa namun masih berfungsi.</li>
                    <li><strong>Input Besar (n=1201-20000):</strong> Iteratif berhasil (~0.004-0.015 detik), rekursif gagal (stack overflow).</li>
                </ul>

                <h4 style="color: #34495e;">Alasan Detail Superioritas Algoritma Iteratif</h4>
                <ol>
                    <li><strong>Efisiensi Memori:</strong> O(1) vs O(n) space. Iteratif menggunakan variabel tetap, rekursif alokasi stack frames.</li>
                    <li><strong>Overhead Operasional:</strong> Loop sederhana vs function calls berulang. Setiap rekursi menambah 10-20 instruksi CPU.</li>
                    <li><strong>Skalabilitas:</strong> Tidak terbatas recursion limit. Iteratif menangani dataset tak terbatas.</li>
                    <li><strong>Stabilitas Sistem:</strong> Tidak ada risiko crash. Rekursif berbahaya pada input besar.</li>
                </ol>

                <h4 style="color: #34495e;">Kesimpulan</h4>
                <p>Meskipun kompleksitas waktu sama O(n), algoritma iteratif superior dalam praktik karena kompleksitas ruang O(1), stabilitas sistem, dan kemampuan menangani dataset besar hingga 20,000+ records. Algoritma rekursif hanya cocok untuk dataset kecil ‚â§1200 elemen sebelum mengalami stack overflow.</p>
            </div>


            <div class="algorithm-comparison">
                <div class="algorithm-card">
                    <h3>Algoritma Iteratif</h3>
                    <div class="algorithm-code">
                        <h4>Kode Algoritma:</h4>
                        <pre><code>def analyze_earthquakes_iterative(features):
    start_time = time.time()
    total_gempa = 0
    sum_magnitudo = 0.0
    jumlah_berbahaya = 0

    for feature in features:  # O(n) - Loop iteratif
        magnitudo = feature['properties']['mag']
        total_gempa += 1
        sum_magnitudo += magnitudo
        if magnitudo >= 5.0:
            jumlah_berbahaya += 1

    rata_rata_magnitudo = sum_magnitudo / total_gempa if total_gempa > 0 else 0.0
    execution_time = time.time() - start_time

    return {
        'total_gempa': total_gempa,
        'rata_rata_magnitudo': round(rata_rata_magnitudo, 2),
        'jumlah_berbahaya': jumlah_berbahaya,
        'waktu_eksekusi': round(execution_time, 4)
    }</code></pre>
                    </div>
                    <div class="results-summary">
                        <p>Total Gempa: <span id="iterative-total"></span></p>
                        <p>Rata-rata Magnitudo: <span id="iterative-rata-rata"></span></p>
                        <p>Min Magnitudo: <span id="iterative-min"></span></p>
                        <p>Max Magnitudo: <span id="iterative-max"></span></p>
                        <p>Standar Deviasi: <span id="iterative-std"></span></p>
                        <p>Jumlah Gempa Berbahaya (‚â•5.0): <span id="iterative-berbahaya" class="danger-count"></span></p>
                        <p>Waktu Eksekusi: <span id="iterative-waktu"></span> detik</p>
                    </div>
                    <div class="complexity-info">
                        <h4>Analisis Kompleksitas</h4>
                        <p><strong>Kasus Terbaik:</strong> <span id="iterative-best"></span></p>
                        <p><strong>Kasus Terburuk:</strong> <span id="iterative-worst"></span></p>
                        <p><strong>Kasus Rata-rata:</strong> <span id="iterative-average"></span></p>
                        <p><strong>Kompleksitas Ruang:</strong> <span id="iterative-space"></span></p>
                        <p><strong>Kesesuaian:</strong> <span id="iterative-suitability"></span></p>
                    </div>
                    <div class="algorithm-conclusion">
                        <h4>Kesimpulan Algoritma Iteratif</h4>
                        <div class="conclusion-content">
                            <p><strong>‚úÖ Kelebihan:</strong></p>
                            <ul>
                                <li>Efisiensi memori O(1) - tidak ada alokasi stack berlebih</li>
                                <li>Stabilitas tinggi - tidak ada risiko stack overflow</li>
                                <li>Performa konsisten untuk dataset besar hingga 20,000+ records</li>
                                <li>Implementasi sederhana dan mudah di-maintain</li>
                            </ul>
                            <p><strong>‚ùå Kekurangan:</strong></p>
                            <ul>
                                <li>Kurang natural untuk masalah rekursif matematis</li>
                                <li>Perlu state eksplisit untuk akumulasi data</li>
                            </ul>
                            <p><strong>üìä Rekomendasi:</strong> Pendekatan iteratif direkomendasikan untuk analisis data seismik skala besar dengan kompleksitas O(n) waktu dan O(1) ruang.</p>
                        </div>
                    </div>
                </div>

                <div class="algorithm-card">
                    <h3>Algoritma Rekursif</h3>
                    <div class="algorithm-code">
                        <h4>Kode Algoritma:</h4>
                        <pre><code>def analyze_earthquakes_recursive(features, index=0, total=0, sum_mag=0.0, dangerous=0):
    if index >= len(features):  # Base case - O(1)
        rata_rata = sum_mag / total if total > 0 else 0.0
        return {
            'total_gempa': total,
            'rata_rata_magnitudo': round(rata_rata, 2),
            'jumlah_berbahaya': dangerous,
            'waktu_eksekusi': 0  # akan diukur di luar
        }

    magnitudo = features[index]['properties']['mag']
    new_total = total + 1
    new_sum = sum_mag + magnitudo
    new_dangerous = dangerous + (1 if magnitudo >= 5.0 else 0)

    return analyze_earthquakes_recursive(
        features, index + 1, new_total, new_sum, new_dangerous
    )  # Recursive call - O(n) calls</code></pre>
                    </div>
                    <div id="recursive-results">
                        <div class="results-summary">
                            <p>Total Gempa: <span id="recursive-total"></span></p>
                            <p>Rata-rata Magnitudo: <span id="recursive-rata-rata"></span></p>
                            <p>Min Magnitudo: <span id="recursive-min"></span></p>
                            <p>Max Magnitudo: <span id="recursive-max"></span></p>
                            <p>Standar Deviasi: <span id="recursive-std"></span></p>
                            <p>Jumlah Gempa Berbahaya (‚â•5.0): <span id="recursive-berbahaya" class="danger-count"></span></p>
                            <p>Waktu Eksekusi: <span id="recursive-waktu"></span> detik</p>
                        </div>
                    </div>
                    <div id="recursive-error" style="display: none; color: red; padding: 10px;">
                        <p><strong>Error:</strong> <span id="recursive-error-msg"></span></p>
                    </div>
                    <div class="complexity-info">
                        <h4>Analisis Kompleksitas</h4>
                        <p><strong>Kasus Terbaik:</strong> <span id="recursive-best"></span></p>
                        <p><strong>Kasus Terburuk:</strong> <span id="recursive-worst"></span></p>
                        <p><strong>Kasus Rata-rata:</strong> <span id="recursive-average"></span></p>
                        <p><strong>Kompleksitas Ruang:</strong> <span id="recursive-space"></span></p>
                        <p><strong>Kesesuaian:</strong> <span id="recursive-suitability"></span></p>
                    </div>
                    <div class="algorithm-conclusion">
                        <h4>Kesimpulan Algoritma Rekursif</h4>
                        <div class="conclusion-content">
                            <p><strong>‚úÖ Kelebihan:</strong></p>
                            <ul>
                                <li>Representasi deklaratif yang elegan memfasilitasi pemahaman algoritma secara matematis.</li>
                                <li>Kesesuaian intrinsik untuk masalah yang bersifat rekursif secara alami, seperti struktur pohon atau pemrosesan hierarkis.</li>
                                <li>Kode yang lebih ringkas dan ekspresif, mengurangi kompleksitas implementasi untuk kasus tertentu.</li>
                            </ul>
                            <p><strong>‚ùå Kekurangan:</strong></p>
                            <ul>
                                <li>Kompleksitas ruang O(n) akibat akumulasi call stack, menyebabkan inefisiensi memori pada dataset besar.</li>
                                <li>Risiko stack overflow pada input >1200 elemen, membatasi skalabilitas praktis (dari maksimal 3000 recursion limit sistem).</li>
                                <li>Tidak sesuai untuk pemrosesan data seismik skala global dengan kompleksitas waktu O(n) namun overhead stack yang signifikan.</li>
                                <li>Implementasi yang lebih kompleks dalam hal debugging dan optimasi performa.</li>
                                <li>Degradasi performa temporal yang eksponensial pada dataset besar akibat manajemen stack.</li>
                            </ul>
                            <p><strong>üìä Rekomendasi:</strong> Berdasarkan evaluasi kompleksitas algoritma, pendekatan rekursif hanya cocok untuk dataset kecil hingga 1200 elemen. Untuk analisis data gempa real-time skala besar, gunakan algoritma iteratif yang lebih stabil dan efisien.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="table-container">
            <div id="table-placeholder" style="text-align: center; padding: 3rem; background: #f8f9fa; border-radius: 8px; margin-bottom: 1rem;">
                <p style="color: #666; font-size: 1.1rem;">Data gempa akan ditampilkan di sini setelah dimuat</p>
                <p style="color: #888; font-size: 0.9rem;">Gunakan kontrol di atas untuk memuat data dari USGS</p>
            </div>
            <table id="earthquake-table">
                <thead>
                    <tr>
                        <th>No</th>
                        <th>Magnitudo</th>
                        <th>Lokasi</th>
                        <th>Tanggal/Waktu</th>
                        <th>Latitude</th>
                        <th>Longitude</th>
                        <th>Kedalaman (km)</th>
                    </tr>
                </thead>
                <tbody id="earthquake-tbody">
                </tbody>
            </table>
        </div>


        <div id="error" style="display: none; color: red; text-align: center; margin: 20px;">
            <p>Terjadi kesalahan memuat data. Silakan coba lagi.</p>
        </div>

    </div>

    <footer>
        <div class="container">
            <div class="footer-links">
                <a href="https://www.usgs.gov/programs/earthquake-hazards" target="_blank">USGS Earthquake Hazards Program</a> |
                <a href="https://earthquake.usgs.gov/earthquakes/map/" target="_blank">View USGS Earthquake Map</a>
            </div>
            <p>&copy; 2025 Earthquake Data Analysis Platform. All rights reserved.</p>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>